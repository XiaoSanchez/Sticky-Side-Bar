<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticky Side Bar</title>
    <link rel="stylesheet" href="css/Style.css">
</head>

<body>

    <div class="sinye dqbgall">
        <div class="container">


            <!-- 左侧导航栏 -->
            <div class="ann_left">
                <div class="ann_daoh">
                    <div class="year_list active" name="list0">
                        <div class="yuan"></div>
                        <div class="year">2020</div>
                        <div class="line"></div>
                    </div>
                    <div class="year_list" name="list1">
                        <div class="yuan"></div>
                        <div class="year">2019</div>
                        <div class="line"></div>
                    </div>
                    <div class="year_list" name="list2">
                        <div class="yuan"></div>
                        <div class="year">2018</div>
                        <div class="line"></div>
                    </div>
                    <div class="year_list" name="list3">
                        <div class="yuan"></div>
                        <div class="year">2017</div>
                        <div class="line"></div>
                    </div>
                    <div class="year_list" name="list4">
                        <div class="yuan"></div>
                        <div class="year">2016</div>
                        <div class="line"></div>
                    </div>
                    <div class="year_list" name="list5">
                        <div class="yuan"></div>
                        <div class="year">2015</div>
                        <div class="line"></div>
                    </div>
                </div>
            </div>


            <!-- 右侧内容 -->
            <div class="ann_right">
                <div class="kuai_list">
                    <div class="kuai_year list0">2020</div>
                    <div class="sadsads">
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                    </div>
                </div>

                <div class="kuai_list">
                    <div class="kuai_year list1">2019</div>
                    <div class="sadsads">
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                    </div>
                </div>

                <div class="kuai_list">
                    <div class="kuai_year list2">2018</div>
                    <div class="sadsads">
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                    </div>
                </div>

                <div class="kuai_list">
                    <div class="kuai_year list3">2017</div>
                    <div class="sadsads">
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                    </div>
                </div>

                <div class="kuai_list">
                    <div class="kuai_year list4">2016</div>
                    <div class="sadsads">
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                    </div>
                </div>

                <div class="kuai_list">
                    <div class="kuai_year list5">2015</div>
                    <div class="sadsads">
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                        <div class="dqbg">
                            <div>
                                <img src="img/t.png" alt="">
                            </div>
                            <div>XXXXXXXXXXXXX</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>
    <script>
        var left_div_top = 50
        var left_div_bottom = 50
        var right_nav_top = 100

        var year_list = $(".sinye .ann_daoh .year_list")


        $(window).scroll(function() {
            var windouWidth = $(this).width();
            var windouHeight = $(this).height();

            var scroH = $(this).scrollTop();



            if ($(".sinye").offset()) {
                var sinye_right_top = $(".sinye .ann_right").offset().top
                var sinye_right_height = $(".sinye .ann_right").outerHeight()

                var sinye_left_top = $(".sinye .ann_left").offset().top
                var sinye_left_height = $(".sinye .ann_daoh").outerHeight()



                if (scroH < sinye_right_top) {
                    $(".sinye .ann_daoh").css({
                        position: "absolute",
                        top: "0px",
                        bottom: "auto"
                    })
                }

                if (scroH > sinye_right_top) {
                    $(".sinye .ann_daoh").css({
                        position: "fixed",
                        top: left_div_top + "px",
                        bottom: "auto"
                    })
                }

                if (sinye_right_top + sinye_right_height < scroH + sinye_left_height + left_div_top + left_div_bottom) {
                    $(".sinye .ann_daoh").css({
                        position: "absolute",
                        top: "auto",
                        bottom: left_div_bottom + "px"
                    })
                }



                $(".sinye .ann_right .kuai_list").each(function(index, element) {
                    if (
                        $(".list" + (index)).offset().top + windouHeight - right_nav_top < scroH + windouHeight
                    ) {
                        $(year_list[index - 1]).removeClass("active")
                        $(year_list[index]).addClass("active")
                    } else {
                        $(year_list[index]).removeClass("active")
                    }
                });
                var first_year = year_list.length
                year_list.each(function(index, element) {
                    if (!$(this).hasClass("active")) {
                        first_year--
                    }
                });
                if (first_year == 0) {
                    $(year_list[0]).addClass("active")
                }
            }
        });


        year_list.click(function(e) {
            e.preventDefault();
            var annname = $(this).attr("name")
            $('html, body').animate({
                scrollTop: $('.' + annname).offset().top - left_div_top
            }, 500)
        });
    </script>
</body>

</html>